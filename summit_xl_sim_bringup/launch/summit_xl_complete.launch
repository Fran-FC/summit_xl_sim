<?xml version="1.0"?>
<launch>

    <!-- What simulator config package to use -->
    <arg name="simulation_package" default="$(optenv SIMULATION_CONFIG_PACKAGE summit_xl_gazebo)"/>
    <arg name="config_package" default="$(optenv CONFIG_PACKAGE summit_xl_gazebo)"/>
    <arg name="sim_bringup_package" default="$(optenv SIM_BRINGUP_PACKAGE summit_xl_sim_bringup)"/>
    <arg name="world_package" default="$(optenv WORLD_PACKAGE summit_xl_gazebo)"/>
    <arg name="rviz_package" default="$(optenv RVIZ_PACKAGE summit_xl_gazebo)"/>
    <arg name="pad_package" default="$(optenv PAD_PACKAGE robotnik_pad)"/>

    <!-- What to execute -->
    <arg name="run_simulation" default="true"/>
    <arg name="run_robot" default="true"/>
    <arg name="run_rviz" default="true"/>
    <arg name="run_localization" default="false"/>
    <arg name="run_navigation" default="false"/>

    <!-- Simulation configuration -->
    <arg name="sim" default="$(optenv SIM_CONTROLLER true)"/>
    <arg name="world" default="$(optenv ROBOT_SIM_GAZEBO_WORLD worlds/summit_xl_office.world)" /> <!-- relative path to config_package -->
    <arg name="world_file" default="$(eval find(world_package) + '/' + world)"/> <!-- absolute path -->
    <arg name="debug" default="false"/>
    <arg name="paused" default="false"/>
    <arg name="headless" default="false"/>
    <arg name="gui" default="true"/>
    <arg name="gpu" default="$(optenv ROBOT_SIM_GPU false)"/>

    <!-- Robot configuration -->
    <arg name="robot_id" default="$(optenv ROBOT_ID robot)"/>
    <arg name="prefix" default="$(arg robot_id)_"/>
    <arg name="robot_model" default="$(optenv ROBOT_MODEL summit_xl)"/>
    <arg name="robot_xacro" default="$(optenv ROBOT_XACRO summit_xl_std.urdf.xacro)"/>
    <arg name="kinematics" default="$(optenv ROBOT_KINEMATICS skid)"/>
    <arg name="ros_planar_move_plugin" default="true" />
    <arg name="x_init_pose" default="$(optenv ROBOT_SIM_GAZEBO_INIT_POSE_X 0)"/>
    <arg name="y_init_pose" default="$(optenv ROBOT_SIM_GAZEBO_INIT_POSE_Y 0)"/>
    <arg name="z_init_pose" default="$(optenv ROBOT_SIM_GAZEBO_INIT_POSE_Z 0)"/>
    <arg name="a_init_pose" default="$(optenv ROBOT_SIM_GAZEBO_INIT_POSE_A 0)"/>
    <arg name="launch_base_hw_sim" default="$(optenv ROBOT_SIM_BASE_HW false)"/>

    <!-- Arm configuration-->
    <arg name="launch_arm" default="$(optenv ROBOT_HAS_ARM false)"/>
    <arg name="arm_manufacturer" default="$(optenv ROBOT_ARM_MANUFACTURER trossen)"/>
    <arg name="arm_model" default="$(optenv ROBOT_ARM_MODEL vx300s)"/>
    <arg name="launch_moveit" default="false"/>

    <!-- RViz configuration -->
    <arg name="rviz_config_file" if="$(arg run_localization)" default="$(optenv RVIZ_FILE rviz/summitxl.rviz)"/>
    <arg name="rviz_config_file" unless="$(arg run_localization)" default="$(optenv RVIZ_FILE rviz/summitxl_a.rviz)"/>
    <arg name="rviz_config_path" default="$(eval find(rviz_package) + '/' + rviz_config_file)"/>

    <!-- Pad configuratin -->
    <arg name="pad_model" default="$(optenv PAD_MODEL ps4)"/>
    <arg name="pad_config_file" default="$(optenv PAD_FILE config/robotnik_pad_plugins_$(arg pad_model).yaml)"/>
    <arg name="pad_config_path" default="$(eval find(pad_package) + '/' + pad_config_file)"/>

    <!-- launch simulation -->
    <include if="$(arg run_simulation)" file="$(eval find(sim_bringup_package) + '/launch/run_simulation.launch')">
        <arg name="simulation_package" value="$(arg simulation_package)"/>
        <arg name="config_package" value="$(arg config_package)"/>
        <arg name="world" value="$(arg world)"/>
        <arg name="world_file" value="$(arg world_file)"/>
        <arg name="debug" value="$(arg debug)" />
        <arg name="paused" value="$(arg paused)" />
        <arg name="headless" value="$(arg headless)"/>
        <arg name="gui" value="$(arg gui)"/>
    </include>

    <!-- launch robot -->
    <include if="$(arg run_robot)" file="$(eval find(sim_bringup_package) + '/launch/run_robot.launch')">
        <arg name="simulation_package" value="$(arg simulation_package)"/>
        <arg name="config_package" value="$(arg config_package)"/>
        <arg name="pad_package" value="$(arg pad_package)"/>
        <arg name="robot_id" value="$(arg robot_id)"/>
        <arg name="prefix" value="$(arg prefix)" />
        <arg name="robot_xacro" value="$(arg robot_xacro)"/>
        <arg name="x_init_pose" value="$(arg x_init_pose)"/>
        <arg name="y_init_pose" value="$(arg y_init_pose)"/>
        <arg name="z_init_pose" value="$(arg z_init_pose)"/>
        <arg name="a_init_pose" value="$(arg a_init_pose)"/>
        <arg name="launch_base_hw_sim" value="$(arg launch_base_hw_sim)"/>
        <arg name="launch_arm" value="$(arg launch_arm)"/>
        <arg name="arm_manufacturer" value="$(arg arm_manufacturer)"/>
        <arg name="arm_model" value="$(arg arm_model)"/>
        <arg name="gpu" value="$(arg gpu)"/>
        <arg name="kinematics" value="$(arg kinematics)"/>
        <arg name="ros_planar_move_plugin" value="$(arg ros_planar_move_plugin)"/>
        <arg name="pad_model" value="$(arg pad_model)"/>
        <arg name="pad_config_file" value="$(arg pad_config_file)"/>
        <arg name="pad_config_path" value="$(arg pad_config_path)"/>
    </include>

    <!-- launch rviz -->
    <include if="$(arg run_rviz)" file="$(eval find(sim_bringup_package) + '/launch/run_rviz.launch')">
        <arg name="rviz_config_file" value="$(arg rviz_config_file)" />
        <arg name="rviz_config_path" value="$(arg rviz_config_path)" />
        <arg name="config_package" value="$(arg rviz_package)"/>
    </include>

    <!-- localization launch file
    <include if="$(arg run_localization)" file="$(find summit_xl_localization)/launch/localization_complete.launch">
        <arg name="prefix" value="$(arg prefix)"/>
    </include>
    -->
    <!-- navigation launch file 
    <include if="$(arg run_navigation)" file="$(find summit_xl_navigation)/launch/navigation_complete.launch">
            <arg name="prefix" value="$(arg prefix)"/>
    </include>
-->
</launch>